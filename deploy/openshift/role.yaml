apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: antrea-operator
rules:
- apiGroups: [""]
  resources: [endpoints]
  verbs: [get, list, watch]
- apiGroups: [""]
  resources: [pods, configmaps, namespaces, serviceaccounts, secrets, services]
  verbs: [create, get, list, patch, delete, update, watch, deletecollection]
- apiGroups: [apps]
  resources: [deployments, daemonsets]
  verbs: [create, get, list, patch, delete, update, watch]
- apiGroups: [admissionregistration.k8s.io]
  resources: [mutatingwebhookconfigurations, validatingwebhookconfigurations]
  verbs: [get, update, create]
- apiGroups: [apiextensions.k8s.io]
  resources: [customresourcedefinitions]
  verbs: [create, get, list, patch, update, watch, delete]
- apiGroups: [discovery.k8s.io]
  resources: [endpointslices]
  verbs: [get, watch, list]
- apiGroups: [rbac.authorization.k8s.io]
  resources: [clusterroles, clusterrolebindings]
  verbs: [create, get, list, patch, update, watch, delete]
- apiGroups: [config.openshift.io]
  resources: [clusteroperators]
  verbs: [create, get, list, patch, update, watch, delete]
- apiGroups: [config.openshift.io]
  resources: [clusteroperators/status]
  verbs: [get, patch, update]
- apiGroups: [config.openshift.io]
  resources: [networks, networks/finalizers]
  verbs: [get, list, watch, patch, update]
- apiGroups: [operator.openshift.io]
  resources: [networks]
  verbs: [get, list, watch, patch, update]
- apiGroups: [operator.antrea.vmware.com]
  resources: [antreainstalls, antreainstalls/status]
  verbs: [get, list, watch, create,patch, update]
# Required by antrea-agent, antrea-controller and antctl
- apiGroups: [""]
  resources: [services/status]
  verbs: [get, watch, list]
- apiGroups: [""]
  resources: [services/status]
  verbs: [get, watch, list, update, patch]
- apiGroups: [""]
  resources: [nodes]
  verbs: [get, watch, list, patch]
- apiGroups: [""]
  resources: [pods, endpoints]
  verbs: [get, watch, list, delete]
- apiGroups: [authentication.k8s.io]
  resources: [tokenreviews]
  verbs: [create]
- apiGroups: [apps]
  resources: [statefulsets]
  verbs: [get, list, watch]
- apiGroups: [authorization.k8s.io]
  resources: [subjectaccessreviews]
  verbs: [create]
- apiGroups: [apiregistration.k8s.io]
  resources: [apiservices]
  verbs: [get, create, update, delete]
- apiGroups: [controlplane.antrea.io]
  resources: [networkpolicies, appliedtogroups, addressgroups]
  verbs: [get, list, watch]
- apiGroups: [controlplane.antrea.io]
  resources: [nodestatssummaries]
  verbs: [create]
- apiGroups: [controlplane.antrea.io]
  resources: [networkpolicies/status]
  verbs: [create, get]
- apiGroups: [crd.antrea.io]
  resources: [clustergroups]
  verbs: [get, create, update, delete, list, watch, patch]
- apiGroups: [crd.antrea.io]
  resources: [externalentities]
  verbs: [get, watch, list, create, update, patch, delete]
- apiGroups: [crd.antrea.io]
  resources: [clustergroups/status]
  verbs: [update]
- apiGroups: [networking.k8s.io]
  resources: [networkpolicies]
  verbs: [get, watch, list]
- apiGroups: [crd.antrea.io]
  resources: [traceflows, traceflows/status]
  verbs: [create, get, list, patch, update, watch, delete, delete]
- apiGroups: [crd.antrea.io]
  resources: [antreaagentinfos, antreacontrollerinfos]
  verbs: [get, list, create, update, delete, delete]
- apiGroups: [controlplane.antrea.io]
  resources: [networkpolicies, appliedtogroups, addressgroups]
  verbs: [get, watch, list, delete]
- apiGroups: [crd.antrea.io]
  resources: [clusternetworkpolicies, networkpolicies]
  verbs: [get, create, update, delete, list, watch, patch]
- apiGroups: [crd.antrea.io]
  resources: [clusternetworkpolicies/status, networkpolicies/status]
  verbs: [update]
- apiGroups: [crd.antrea.io]
  resources: [tiers]
  verbs: [get, watch, list, create, update, patch, delete]
- apiGroups: [stats.antrea.io]
  resources: [networkpolicystats, antreaclusternetworkpolicystats, antreanetworkpolicystats]
  verbs: [get, list]
- apiGroups: [system.antrea.io]
  resources: [controllerinfos, agentinfos, supportbundles, supportbundles/download]
  verbs: [get, watch, list, post, delete]
- apiGroups: [security.openshift.io]
  resources: [hostnetwork, securitycontextconstraints]
  verbs: [use]
- apiGroups: [crd.antrea.io]
  resources: [externalippools, ippools]
  verbs: [get, watch, list]
- apiGroups: [crd.antrea.io]
  resources: [externalippools/status]
  verbs: [update]
- apiGroups: [controlplane.antrea.io]
  resources: [egressgroups]
  verbs: [get, watch, list]
- apiGroups: [crd.antrea.io]
  resources: [egresses]
  verbs: [get, watch, list, update, patch]
- apiGroups: [crd.antrea.io]
  resources: [egresses/status]
  verbs: [update]
- apiGroups: [crd.antrea.io]
  resources: [ippools/status]
  verbs: [update]
- apiGroups: [k8s.cni.cncf.io]
  resources: [network-attachment-definitions]
  verbs: [get, list, watch]

- nonResourceURLs:
  - /agentinfo
  - /addressgroups
  - /appliedtogroups
  - /featuregates
  - /loglevel
  - /networkpolicies
  - /ovsflows
  - /ovstracing
  - /podinterfaces
  verbs:
  - get

